<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">10. Secure Connectors with APIM | Low Code &amp; Fusion Dev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/Low-Code/blog/2023-day10"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="10. Secure Connectors with APIM | Low Code &amp; Fusion Dev"><meta data-rh="true" name="description" content="Throughout this post, let&#x27;s discuss how Azure API Management can offer extra security to Power Platform custom connectors."><meta data-rh="true" property="og:description" content="Throughout this post, let&#x27;s discuss how Azure API Management can offer extra security to Power Platform custom connectors."><meta data-rh="true" name="keywords" content="power-platform,custom-connector,api-management,apim,security,authn,authentication,authorization"><meta data-rh="true" property="og:image" content="https://microsoft.github.io/Low-Code/img/og/30-10.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-02-10T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/justinyoo,https://github.com/juliajuju93"><meta data-rh="true" property="article:tag" content="low-code-february,28-days-of-lowcode,learn-live,zero-to-hero,ask-the-expert,fusion-teams,power-platform"><meta data-rh="true" name="twitter:url" content="https://microsoft.github.io/Low-Code/blog/2023-day10"><meta data-rh="true" name="twitter:title" content="Providing Power Platform custom connector with additional security via Azure API Management"><meta data-rh="true" name="twitter:description" content="Throughout this post, let&#x27;s discuss how Azure API Management can offer extra security to Power Platform custom connectors"><meta data-rh="true" name="twitter:image" content="https://microsoft.github.io/Low-Code/img/og/30-10.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@justinchronicle"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><link data-rh="true" rel="icon" href="/Low-Code/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/Low-Code/blog/2023-day10" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/Low-Code/blog/2023-day10" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/Low-Code/blog/2023-day10"><link rel="alternate" type="application/rss+xml" href="/Low-Code/blog/rss.xml" title="Low Code &amp; Fusion Dev RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Low-Code/blog/atom.xml" title="Low Code &amp; Fusion Dev Atom Feed">




<script>!function(e,t,n,c,s,a,r){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},(a=t.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/eze7lsqnch",(r=t.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><link rel="stylesheet" href="/Low-Code/assets/css/styles.3b56b261.css">
<link rel="preload" href="/Low-Code/assets/js/runtime~main.f6b0d7e3.js" as="script">
<link rel="preload" href="/Low-Code/assets/js/main.e853704f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#000000;color:#ffffff" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><b> <a href="https://aka.ms/lowcode-february/challenge"> Take Our Cloud Skills Challenge! </a> | Give us <a href="https://github.com/microsoft/Low-Code"><b> a 🌟 on GitHub</b></a> </b> </div></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Low-Code/"><div class="navbar__logo"><img src="/Low-Code/img/logo.png" alt="Low Code Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/Low-Code/img/logo.png" alt="Low Code Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"> </b></a><a class="navbar__item navbar__link" href="/Low-Code/lowcode-february">#LowCodeFebruary</a><a href="https://aka.ms/lowcode-february/devplan" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">✨ Dev Plan</a><a href="https://aka.ms/lowcode-february/vscode" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">🧰 Extension</a><a href="https://learn.microsoft.com/events/learn-events/powerful-devs-2023/?WT.mc_id=javascript-82212-ninarasi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">🎙 #PowerfulDevs</a></div><div class="navbar__items navbar__items--right"><a href="https://aka.ms/lowcode-february/collection" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Collection</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Low-Code/blog">Blog</a><a href="https://aka.ms/lowcode-february/videos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Video</a><a class="navbar__item navbar__link" href="/Low-Code/docs/intro">Workshops</a><a class="navbar__item navbar__link" href="/Low-Code/calendar">Calendar</a><a href="https://github.com/microsoft/Low-Code" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Articles</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-next-steps">Continue The Journey!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day27">27. 🚀API Management &amp; Power Platform</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day26">26. Recap - Dev Experience Week ✨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day24">24. Power Apps &amp; Automated Testing</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day23">23. Power Platform and Governance</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day22">22. Power Automate, ACS and OpenAI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day21">21. GitHub Actions for Power</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day20">20. ALM For Power Platform</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day19">19. Recap - Interface Week ✨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day18">18. Power Pages for ProDevs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day17">17. Build a PCF Control</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day16">16. Intro to PCF Control</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day15">15. 🚀 OpenAI &amp; Microsoft Power Platform</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day14">14. Intro to Power Fx</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day13">13. Build a Canvas App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day12">12. Recap - Integrations Week ✨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day11">11. Azure Integration Patterns</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/Low-Code/blog/2023-day10">10. Secure Connectors with APIM</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day9-use">9b. Use the Custom Connector</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day9-build">9a. Build a Custom Connector</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day8">8. Serverless Low Code</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day7">7. Dataverse - Do more with Data, for less!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day6">6. Let&#x27;s Make Some Connections!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day5">5. Recap - Fundamentals Week ✨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day4">4. 🚀 Developer Stories</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day3">3. DevTools &amp; Onboarding</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day2">2. You say Low, I say Code!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-day1">1. Hello, 30DaysOfLowCode!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Low-Code/blog/2023-kickoff">It&#x27;s a Low Code February!</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://microsoft.github.io/Low-Code/img/og/30-10.png"><header><h1 class="title_f1Hy" itemprop="headline">10. Secure Connectors with APIM</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-02-10T00:00:00.000Z" itemprop="datePublished">February 10, 2023</time> · <!-- -->16 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/justinyoo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/justinyoo.png" alt="Justin Yoo"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/justinyoo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Justin Yoo</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Cloud Advocate (.NET)</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/juliajuju93" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/juliajuju93.png" alt="Julia Kasper"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/juliajuju93" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Julia Kasper</span></a></div><small class="avatar__subtitle" itemprop="description">Program Manager II</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>Welcome to <code>Day 10</code> of #30DaysOfLowCode!</p><p>The theme for this week is <strong>backend</strong>. Yesterday we talked about building custom connectors. Today we&#x27;ll explore the topic of <em>providing Power Platform custom connectors with additional security via <a href="https://learn.microsoft.com/azure/api-management/api-management-key-concepts?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Azure API Management</a></em>. Ready? Let&#x27;s go!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-well-cover">What We&#x27;ll Cover<a class="hash-link" href="#what-well-cover" title="Direct link to heading">​</a></h2><ul><li><a href="#power-platform-custom-connector-authentication-types"><strong>Authentication Types</strong></a> for Custom Connectors</li><li><a href="#prerequisites"><strong>Prerequisites</strong></a></li><li><a href="#deploying-sample-apps"><strong>Deploying</strong></a> Sample Apps<ol><li><a href="#1-api-key-auth">API Key Auth</a></li><li><a href="#2-basic-auth">Basic Auth</a></li><li><a href="#3-oauth2--authorisation-code-auth">OAuth2 – Authorisation Code Auth</a></li><li><a href="#4-bff-backends-for-frontends--combination-of-api-key-auth-and-basic-auth">BFF (Backends-for-Frontends) – Combine API Key Auth &amp; Basic Auth</a></li></ol></li><li><a href="#exercise--try-it-yourself"><strong>Exercise</strong></a> – Try it yourself!</li><li><a href="#resources--for-self-study"><strong>Resources</strong></a> – For self-study!</li></ul><p><img loading="lazy" alt="Empty Banner Placeholder" src="/Low-Code/assets/images/30-10-4efbd6976ad2e4a6b00af11b0146cd7a.png" width="1001" height="420" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-connector-authentication-types">Custom Connector Authentication Types<a class="hash-link" href="#custom-connector-authentication-types" title="Direct link to heading">​</a></h2><p>Power Platform custom connectors currently support <a href="https://learn.microsoft.com/connectors/custom-connectors/connection-parameters?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">four authentication flow options <!-- -->–<!-- --> No Auth flow, API Key Auth flow, Basic Auth flow and OAuth2 Authorisation Code Auth flow</a>. &quot;No Auth flow&quot; is definitely not an option this time, but let&#x27;s focus on the other three options throughout this post. You also need to be aware that those authentication types are mutually exclusive. In other words, you CANNOT combine two or more authentication scenarios on one custom connector. Also, if you want to use the API Key auth flow, you CANNOT use the other two authentication types within the custom connector. I&#x27;ll discuss that later in this post.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><p>For this post, you need to have the following signed up:</p><ul><li><a href="https://learn.microsoft.com/office/developer-program/microsoft-365-developer-program?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Microsoft 365 Developer Program</a></li><li><a href="https://learn.microsoft.com/power-apps/maker/developer-plan?WT.mc_id=dotnet-82212-juyoo?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Power Platform Developer Program</a></li><li><a href="https://azure.microsoft.com/free/?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Free Microsoft Azure subscription</a></li><li><a href="https://github.com/signup" target="_blank" rel="noopener noreferrer">Free GitHub account</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-sample-apps">Deploying Sample Apps<a class="hash-link" href="#deploying-sample-apps" title="Direct link to heading">​</a></h2><p>Let&#x27;s deploy the sample apps for this post. Fork <a href="https://github.com/devkimchi/power-platform-connector-via-apim" target="_blank" rel="noopener noreferrer">this repository</a> and follow the detailed instruction on its README to provision and deploy the sample apps. Once everything is done, you will have one <a href="https://learn.microsoft.com/azure/api-management/api-management-key-concepts?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">API Management</a> instance and three <a href="https://learn.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Azure Functions</a> app instances representing authentication scenarios like API Key Auth, Basic Auth and OAuth2 Auth, respectively.</p><p><img loading="lazy" alt="Azure resources provisioned" src="/Low-Code/assets/images/image-01-4893b350e625d25903f0f4cf27595691.png" width="3743" height="1896" class="img_ev3q"></p><p>Each function app has already been integrated with API Management. Let&#x27;s take a look at each authentication type.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-api-key-auth">1. API Key Auth<a class="hash-link" href="#1-api-key-auth" title="Direct link to heading">​</a></h3><p>The first option is using an API key to provide extra security. Using Azure API Management, you can choose between:</p><ul><li>A concept called <a href="https://learn.microsoft.com/azure/api-management/api-management-subscriptions?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">subscription</a>, where you use the subscription key through a HTTP request header of <code>Ocp-Apim-Subscription-Key</code></li><li>Or you can use a HTTP request query string of <code>subscription-key</code>.</li></ul><p>Both options add another security layer to your API, in addition to your Azure Function app&#x27;s <code>x-functions-key</code> in the request header or <code>code</code> in the request querystring.</p><ol><li><p>Let&#x27;s take a look at the <a href="https://learn.microsoft.com/azure/api-management/api-management-howto-policies?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">API policy configurations</a> in API Management.</p><p> <img loading="lazy" alt="API Key Auth - API policy" src="/Low-Code/assets/images/image-02-519de908f5076d4850a46f206ad97020.png" width="3743" height="1896" class="img_ev3q"></p><p>Through this policy, the function app&#x27;s API key is integrated. Therefore, you don&#x27;t need to worry about the function app&#x27;s API key.</p></li><li><p>Now, you want to add the API Management&#x27;s API key. First, make sure your API settings have enabled the subscription. Also, ensure that no user authorization is enabled by selecting &quot;None&quot; against the &quot;User authorization&quot; option.</p><p><img loading="lazy" alt="API Key Auth - enable subscription" src="/Low-Code/assets/images/image-03-2b17d30198e3fe723b56b7df5f18d092.png" width="3742" height="1896" class="img_ev3q"></p></li><li><p>Export the OpenAPI document by selecting the &quot;Export&quot; menu and choosing the &quot;OpenAPI v2 (JSON)&quot; option. Then you will be able to download an OpenAPI document.</p><p> <img loading="lazy" alt="API Key Auth - export OpenAPI document" src="/Low-Code/assets/images/image-04-0f4bb496b949a6978fd6941e903f1506.png" width="3743" height="1896" class="img_ev3q"></p><p>You might have a question here.</p><blockquote><p>What does the &quot;Create Power Connector&quot; menu do? Isn&#x27;t that for this API key auth?</p></blockquote><p>That&#x27;s actually a valid question. The only difference between exporting the OpenAPI document and creating the connector directly through the menu is that which tenant you want to export the connector to. If you want to only use within your tenant, the &quot;Create Power Connector&quot; is a simple and easy way to generate a custom connector. However, if your connector is not only for your tenant, but also other tenant, you should export the OpenAPI document and use it in the other tenants.</p><p>Therefore, throughout this post, you&#x27;re assuming to use this custom connector in general purpose, rather than tied with your tenant.</p></li><li><p>Let&#x27;s take a look at the document. It might look like the following JSON document, saying that you MUST use the API key through <code>Ocp-Apim-Subscription-Key</code> in the request header or <code>subscription-key</code> in the request querystring.</p><div class="language-jsonc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;swagger&quot;: &quot;2.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;securityDefinitions&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;apiKeyHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;apiKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;Ocp-Apim-Subscription-Key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;in&quot;: &quot;header&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;apiKeyQuery&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;apiKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;subscription-key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;in&quot;: &quot;query&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;security&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;apiKeyHeader&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;apiKeyQuery&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;paths&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Alright. Let&#x27;s import this OpenAPI document for a custom connector. Go to either <code>https://make.powerapps.com</code> for Power Apps or <code>https://make.powerautomate.com</code> for Power Automate, and create a custom connector by importing an OpenAPI file.</p><p><img loading="lazy" alt="API Key Auth - custom connector by OpenAPI file" src="/Low-Code/assets/images/image-05-c3f01493756a551b1b4d7a6dce549f99.png" width="3744" height="2018" class="img_ev3q"></p></li><li><p>It automatically identifies the authentication type to &quot;API Key&quot;, the API key parameter name of <code>Ocp-Apim-Subscription-Key</code> and the parameter location of &quot;Header&quot;.</p><p><img loading="lazy" alt="API Key Auth - custom connector authentication type" src="/Low-Code/assets/images/image-06-4fad725d45c7f0c6d3af0ef5a47c0b3f.png" width="3744" height="2018" class="img_ev3q"></p></li><li><p>After creating the connector, let&#x27;s create a connection for the connector. Then, it requires the API key. Enter the API key generated from the API Management.</p><p><img loading="lazy" alt="API Key Auth - custom connector connection" src="/Low-Code/assets/images/image-07-98bf2138b5404b4f773ac2286f82ae33.png" width="3744" height="2018" class="img_ev3q"></p></li><li><p>Test the connector to see whether it works OK or not.</p><p><img loading="lazy" alt="API Key Auth - custom connector test" src="/Low-Code/assets/images/image-08-a7e96a8a482ae51c3040437bb42735a3.png" width="3744" height="2018" class="img_ev3q"></p></li></ol><p>We&#x27;ve added extra security to the custom connector with API Management&#x27;s API key.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-basic-auth">2. Basic Auth<a class="hash-link" href="#2-basic-auth" title="Direct link to heading">​</a></h3><p>The second option is to use the basic auth flow. It&#x27;s important to know that <strong>API Management doesn&#x27;t support this basic auth flow out-of-the-box</strong>. Although it&#x27;s a limitation, you can still apply this flow for the Power Platform custom connectors by slightly modifying the OpenAPI document.</p><ol><li><p>Let&#x27;s take a look at the API policy, which is basically the same as the one in the previous section <!-- -->–<!-- --> integrate the function app&#x27;s API key with API Management.</p><p><img loading="lazy" alt="Basic Auth - API policy" src="/Low-Code/assets/images/image-09-43ad66e234c3721883524bb9664ed757.png" width="3743" height="1896" class="img_ev3q"></p></li><li><p>Make sure that you&#x27;re not going to use the subscription key at this time. Therefore, disable the subscription key. By doing so, you no longer need the API key for this API.</p><p> <img loading="lazy" alt="Basic Auth - disable subscription" src="/Low-Code/assets/images/image-10-d019fb9324e320f25e7e03908275d976.png" width="3743" height="1896" class="img_ev3q"></p><blockquote><p><strong>WARNING</strong>: If you disable the subscription key for this exercise, your API endpoint works as like a public API <!-- -->–<!-- --> not secure at all. Therefore, you MUST implement the logic in your function app that validates the basic authentication header sent through API Management. As mentioned above, it&#x27;s required to disable the subscription key because API Management doesn&#x27;t natively support the basic auth feature. Therefore, if you want to use this approach, please use it with extra care.</p></blockquote></li><li><p>Once you&#x27;re ready, export the OpenAPI document by selecting the &quot;Export&quot; menu and choosing the &quot;OpenAPI v2 (JSON)&quot; option.</p><p><img loading="lazy" alt="Basic Auth - export OpenAPI document" src="/Low-Code/assets/images/image-11-d07246e17a1562a24a265db43537be65.png" width="3743" height="1896" class="img_ev3q"></p></li><li><p>Then, you will be able to download an OpenAPI document. Let&#x27;s take a look at the document. It might look like the following JSON document, saying that you MUST use either <code>Ocp-Apim-Subscription-Key</code> in the request header or <code>subscription-key</code> in the request querystring.</p><p>However, you MUST replace both with the basic auth because you will not use the API key auth this time.</p><div class="language-jsonc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;swagger&quot;: &quot;2.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;securityDefinitions&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;apiKeyHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;apiKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;Ocp-Apim-Subscription-Key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;in&quot;: &quot;header&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;apiKeyQuery&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;apiKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;subscription-key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;in&quot;: &quot;query&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Add &#x27;basicAuth&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;basicAuth&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;basic&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Add &#x27;basicAuth&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;security&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;apiKeyHeader&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;apiKeyQuery&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Add &#x27;basicAuth&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;basicAuth&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Add &#x27;basicAuth&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;paths&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Once you update the OpenAPI document, let&#x27;s import this OpenAPI document for a custom connector. Go to either <code>https://make.powerapps.com</code> for Power Apps or <code>https://make.powerautomate.com</code> for Power Automate, and create a custom connector by importing an OpenAPI file.</p><p><img loading="lazy" alt="Basic Auth - custom connector by OpenAPI file" src="/Low-Code/assets/images/image-12-dd11d14ca6b43c5bdd8b6d24cda4e078.png" width="3744" height="2018" class="img_ev3q"></p></li><li><p>It automatically identifies the authentication type as &quot;Basic authentication&quot;, &quot;username&quot;, and &quot;password&quot;.</p><p><img loading="lazy" alt="Basic Auth - custom connector authentication type" src="/Low-Code/assets/images/image-13-0adbbb234fe8c6c3844ad1b178ab56cf.png" width="3744" height="2018" class="img_ev3q"></p></li><li><p>After creating the connector, let&#x27;s create a connection for the connector. Then, it requires the username and password. The username and password in this sample app are for <a href="https://www.atlassian.com/software/jira" target="_blank" rel="noopener noreferrer">Atlassian Jira</a>. Therefore, get your email address as the username and API token as the password from there.</p><p><img loading="lazy" alt="Basic Auth - custom connector connection" src="/Low-Code/assets/images/image-14-761992567a48eecc18e9fd2736ba88bd.png" width="3744" height="2018" class="img_ev3q"></p></li><li><p>Test the connector to see whether it works OK or not.</p><p><img loading="lazy" alt="Basic Auth - custom connector test" src="/Low-Code/assets/images/image-15-a020125636e08d1af38de3e0cbdc56da.png" width="3744" height="2015" class="img_ev3q"></p></li></ol><p>We&#x27;ve added extra security to the custom connector with basic auth.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-oauth2---auth-code">3. OAuth2 - Auth Code<a class="hash-link" href="#3-oauth2---auth-code" title="Direct link to heading">​</a></h3><p>The third option is to use <a href="https://oauth.net/2/" target="_blank" rel="noopener noreferrer">OAuth2</a>. There are many authentication flows in OAuth2, but Power Platform custom connector only supports the <a href="https://learn.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Authorisation code auth flow</a> at this time of writing. Therefore, let&#x27;s focus on that. The basic idea of using any OAuth2 auth flow is to get the access token and the resources you want. It&#x27;s safe to assume that the function app is able to understand the access token and process it.</p><ol><li><p>To use OAuth2 auth flow, you need to first <a href="https://learn.microsoft.com/azure/active-directory/develop/quickstart-register-app?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">register an app</a> in <a href="https://learn.microsoft.com/azure/active-directory/fundamentals/active-directory-whatis?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Azure Active Directory</a>. After registering a new app, it will give the ability to get the access codes. I&#x27;m not going into too many details here, but it&#x27;s worth taking a look at <a href="https://github.com/devkimchi/power-platform-connector-via-apim/blob/main/src/AuthCodeAuthApp/README.md" target="_blank" rel="noopener noreferrer">this document</a>. Once you create the app, you will have the following information:</p><ul><li>Tenant ID</li><li>Client ID</li><li>Client secret</li><li>Endpoint URL for authorization</li><li>Endpoint URL for the access token</li><li>Endpoint URL for the refresh token</li></ul></li><li><p>With this information, you need to integrate it with API Management. Go to Azure Portal, open the API Management instance, and navigate to the &quot;OAuth 2.0 + OpenID Connect&quot; blade. Add a new OAuth2 service under the &quot;OAuth 2.0&quot; tab.</p><p><img loading="lazy" alt="Auth Code Auth - new OAuth2 service" src="/Low-Code/assets/images/image-16-02f47bdb5ba514b6c11537d9bfd3e12f.png" width="3743" height="1896" class="img_ev3q"></p></li><li><p>Enter the following details in the fields and create the service.</p><ul><li>Display name: <code>AuthCode Auth</code></li><li>Client registration page URL: <code>http://localhost</code></li><li>Authorization grant types: tick only on &quot;Authorization code&quot;</li><li>Authorization endpoint URL: endpoint URL for authorization noted from the above</li><li>Token endpoint URL: endpoint URL for access token noted from the above</li><li>Default scope: <code>https://graph.microsoft.com/.default</code></li><li>Client ID: client ID noted from the above</li><li>Client secret: client secret noted from the above</li></ul><p>After that, you will have both redirect URLs:</p><ul><li><code>null/signin-oauth/code/callback/authcode-auth</code></li><li><code>null/signin-oauth/implicit/callback</code></li></ul><p>Replace <code>null</code> with your API Management instance URL like <code>https://{{APIM_NAME}}.azure-api.net</code>, where <code>{{APIM_NAME}}</code> is your API Management instance name.</p></li><li><p>Add both redirect URLs to your registered app on Azure AD as redirect URLs.</p></li><li><p>Check out the API policy, which is basically the same as in the previous sections <!-- -->–<!-- --> integrate the function app&#x27;s API key with API Management.</p><p><img loading="lazy" alt="Auth Code Auth - API policy" src="/Low-Code/assets/images/image-17-a7fbbcd2e213d59a43e25e96e8452d02.png" width="3743" height="1896" class="img_ev3q"></p></li><li><p>Make sure you will not use the subscription key this time. Therefore, disable the subscription key. By doing so, you no longer need the API key for this API. In addition to this, because you&#x27;re using OAuth2 authorization, choose the &quot;OAuth 2.0&quot; option and select the OAuth 2.0 server of &quot;AuthCode Auth&quot; that you just created right before.</p><p><img loading="lazy" alt="Auth Code Auth - disable subscription" src="/Low-Code/assets/images/image-18-eef8b645ceb0f918478d8e211ec3d185.png" width="3743" height="1896" class="img_ev3q"></p><p>It&#x27;s also worth noting that because the custom connector sends the OAuth2 access token to the function app through API Management, it&#x27;s safe to assume that the function app is able to understand the token and process it.</p></li><li><p>Once you&#x27;re ready, export the OpenAPI document by selecting the &quot;Export&quot; menu and choosing the &quot;OpenAPI v2 (JSON)&quot; option.</p><p><img loading="lazy" alt="Auth Code Auth - export OpenAPI document" src="/Low-Code/assets/images/image-19-cc234416e51aba7029234eca6760b5ff.png" width="3743" height="1896" class="img_ev3q"></p></li><li><p>Then, you will be able to download an OpenAPI document. Let&#x27;s take a look at the document. It might look like the following JSON document, saying that you MUST use either <code>Ocp-Apim-Subscription-Key</code> in the request header or <code>subscription-key</code> in the request querystring.</p><p>However, you MUST remove both because you will not use the API key auth this time. Make sure you MUST replace <code>{{TENANT_ID}}</code> with your tenant ID.</p><div class="language-jsonc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;swagger&quot;: &quot;2.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;securityDefinitions&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;apiKeyHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;apiKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;Ocp-Apim-Subscription-Key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;in&quot;: &quot;header&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;apiKeyQuery&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;apiKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;subscription-key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;in&quot;: &quot;query&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Keep &#x27;oauth2AuthCode Auth&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;oauth2AuthCode Auth&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;oauth2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;scopes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;https://graph.microsoft.com/.default&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;flow&quot;: &quot;accessCode&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;authorizationUrl&quot;: &quot;https://login.microsoftonline.com/{{TENANT_ID}}/oauth2/v2.0/authorize&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;tokenUrl&quot;: &quot;https://login.microsoftonline.com/{{TENANT_ID}}/oauth2/v2.0/token&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Keep &#x27;oauth2AuthCode Auth&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;security&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;apiKeyHeader&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;oauth2AuthCode Auth&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;https://graph.microsoft.com/.default&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;apiKeyQuery&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;oauth2AuthCode Auth&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;https://graph.microsoft.com/.default&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Remove both &#x27;apiKeyHeader&#x27; and &#x27;apiKeyQuery&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬇️⬇️⬇️ Add &#x27;oauth2AuthCode Auth&#x27; ⬇️⬇️⬇️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;oauth2AuthCode Auth&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;https://graph.microsoft.com/.default&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ⬆️⬆️⬆️ Add &#x27;oauth2AuthCode Auth&#x27; ⬆️⬆️⬆️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;paths&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Once you update the OpenAPI document, let&#x27;s import this OpenAPI document for a custom connector. Go to either <code>https://make.powerapps.com</code> for Power Apps or <code>https://make.powerautomate.com</code> for Power Automate, and create a custom connector by importing an OpenAPI file.</p><p><img loading="lazy" alt="Auth Code Auth - custom connector by OpenAPI file" src="/Low-Code/assets/images/image-20-26ce20b7e6736e302d2b0562be2a9cb3.png" width="3744" height="2014" class="img_ev3q"></p></li><li><p>It automatically identifies the authentication type to &quot;OAuth 2.0&quot; and the Identity Provider of &quot;Generic OAuth 2&quot;. Then, enter the Client ID, Client secret, and the Refresh URL noted above. Using a different registered app here is OK if it&#x27;s under the same tenant.</p><p><img loading="lazy" alt="Auth Code Auth - custom connector authentication type" src="/Low-Code/assets/images/image-21-a0b8a0e725d79de4454c03de503d73a9.png" width="3744" height="2014" class="img_ev3q"></p></li><li><p>After creating the connector, let&#x27;s create a connection for the connector. As you&#x27;ve already provided the client ID and secret, you will immediately create the connection.</p></li><li><p>Test the connector to see whether it works OK or not.</p><p><img loading="lazy" alt="Auth Code Auth - custom connector test" src="/Low-Code/assets/images/image-22-2904da0323b0123319f9cd9239fb5c6a.png" width="3744" height="2014" class="img_ev3q"></p></li></ol><p>We&#x27;ve added extra security to the custom connector with OAuth2 - authorization code auth.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-bff---combine-auth">4. BFF - Combine Auth<a class="hash-link" href="#4-bff---combine-auth" title="Direct link to heading">​</a></h3><p>Many organisations nowadays have requirements using the <a href="https://learn.microsoft.com/azure/architecture/patterns/backends-for-frontends?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">BFF (Backends-for-frontends) pattern</a> through API Management, mainly if your organisation adopts microservice architecture. It&#x27;s not uncommon that APIs use different authentication approaches for different APIs <!-- -->–<!-- --> one uses the API key auth, another uses the basic key auth, and the other uses the OAuth2 auth.</p><p>If you are about to build a BFF with those APIs using different authentication methods, what would you do? What could you do if you&#x27;re even about to create the BFF for the Power Platform custom connector? There are many different combinations of authentication methods, but let&#x27;s focus on following two <!-- -->–<!-- --> API key auth and basic auth:</p><ol><li><p>First of all, you MUST choose which authentication type you will use for the main one for the Power Platform custom connector. If you want to use basic auth as the main one, the custom connector doesn&#x27;t have to know the API key and vice versa. In other words, the other authentication method MUST be handled by the API Management policy of the BFF API.</p></li><li><p>Let&#x27;s take a look at <a href="https://github.com/devkimchi/power-platform-connector-via-apim/blob/main/infra/apim-openapi-bff.yaml" target="_blank" rel="noopener noreferrer">this OpenAPI document</a> for BFF. It combines both apps using the API key auth and basic auth, respectively.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">openapi</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 3.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">/greeting</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">get</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> greeting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">summary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Greeting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">operationId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Greeting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">security</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiKeyHeader</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiKeyQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">/profile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">get</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">summary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">operationId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">security</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiKeyHeader</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiKeyQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">basicAuth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">components</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">securitySchemes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">apiKeyHeader</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apiKey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ocp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Apim</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Subscription</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">in</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">apiKeyQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apiKey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> subscription</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">in</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">basicAuth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">scheme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> basic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It defines API key auth and basic auth in the document and applies them to each endpoint.</p></li><li><p>Import this OpenAPI to API Management. Then check out the settings. Make sure you MUST activate the subscription.</p><p><img loading="lazy" alt="BFF - enable subscription" src="/Low-Code/assets/images/image-23-d0808a4b019b906710ea26e965d0a519.png" width="3744" height="1896" class="img_ev3q"></p></li><li><p>Add the <a href="https://learn.microsoft.com/azure/api-management/authentication-basic-policy?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer"><code>authentication-basic</code> as an inbound policy</a> that sets the basic auth token to the request header. After this, API Management automatically injects this basic auth token into every request header.</p><p><img loading="lazy" alt="BFF - basic authentication policy" src="/Low-Code/assets/images/image-24-602cab4fc554457920323ff98cf194bd.png" width="3744" height="1896" class="img_ev3q"></p></li><li><p>Export the OpenAPI document. As you use the API key auth, follow the <a href="#1-api-key-auth">1. API Key Auth</a> pattern.</p></li><li><p>In the Power Platform custom connector, you only need the API key provided by API Management to create the connection because API Management has already encapsulated the basic auth token.</p></li><li><p>Test the connector to see whether it works OK or not. As you can see, both endpoints work perfectly fine.</p><p><img loading="lazy" alt="BFF - custom connector test" src="/Low-Code/assets/images/image-25-8944dbc0af647b582cb0b0c618f8de42.png" width="3744" height="2014" class="img_ev3q"></p></li></ol><p>We&#x27;ve created a BFF by combining APIs that use API key auth and basic auth, and the BFF has been used for the Power Platform custom connector. However, as mentioned earlier in this post, we have to choose only one authentication type due to the restriction of authentication types in the Power Platform custom connector. Therefore, if you need more than one authentication type for your connector, you MUST choose one, and API Management MUST encapsulate all the others.</p><p>Theoretically, there are three possible combinations for BFF:</p><ul><li>API key auth and basic auth</li><li>API key auth and OAuth2 auth code auth</li><li>Basic auth and OAuth2 auth code auth</li></ul><p>Throughout this post, we&#x27;ve walked through the first combination. After that, you can try the other two combinations on your end!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exercise--try-it-yourself">Exercise <!-- -->–<!-- --> Try it yourself!<a class="hash-link" href="#exercise--try-it-yourself" title="Direct link to heading">​</a></h2><p>If you haven&#x27;t joined the following programs, it&#x27;s time to do so for further learning!</p><ul><li><a href="https://learn.microsoft.com/office/developer-program/microsoft-365-developer-program?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Microsoft 365 Developer Program</a></li><li><a href="https://learn.microsoft.com/power-apps/maker/developer-plan?WT.mc_id=dotnet-82212-juyoo?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Power Platform Developer Program</a></li><li><a href="https://azure.microsoft.com/free/?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Free Microsoft Azure subscription</a></li><li><a href="https://github.com/signup" target="_blank" rel="noopener noreferrer">Free GitHub account</a></li></ul><p>Then, follow the steps below. After that, you will be the one who knows better security on Power Platform custom connectors!</p><ul><li>Fork this <a href="https://github.com/devkimchi/power-platform-connector-via-apim" target="_blank" rel="noopener noreferrer">GitHub repository</a> to provision and deploy the sample apps.</li><li>Read and follow the instructions for each scenario:<ul><li><a href="https://github.com/devkimchi/power-platform-connector-via-apim/blob/main/src/ApiKeyAuthApp/README.md" target="_blank" rel="noopener noreferrer">API Key Auth</a></li><li><a href="https://github.com/devkimchi/power-platform-connector-via-apim/blob/main/src/BasicAuthApp/README.md" target="_blank" rel="noopener noreferrer">Basic Auth</a></li><li><a href="https://github.com/devkimchi/power-platform-connector-via-apim/blob/main/src/AuthCodeAuthApp/README.md" target="_blank" rel="noopener noreferrer">Authorisation Code Auth</a></li><li><a href="https://github.com/devkimchi/power-platform-connector-via-apim/blob/main/src/BffApp/README.md" target="_blank" rel="noopener noreferrer">BFF</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources--self-study">Resources <!-- -->–<!-- --> Self-Study<a class="hash-link" href="#resources--self-study" title="Direct link to heading">​</a></h2><ul><li><a href="https://learn.microsoft.com/azure/architecture/patterns/backends-for-frontends?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Cloud architecture pattern <!-- -->–<!-- --> BFF (Backends-for-frontends)</a></li><li><a href="https://learn.microsoft.com/azure/active-directory/develop/quickstart-register-app?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Azure AD application model</a></li><li><a href="https://learn.microsoft.com/azure/api-management/authentication-authorization-overview?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Azure API Management authentication and authorisation</a></li><li><a href="https://learn.microsoft.com/connectors/custom-connectors/connection-parameters?WT.mc_id=dotnet-82212-juyoo" target="_blank" rel="noopener noreferrer">Power Platform custom connector parameters</a></li><li><a href="https://learn.microsoft.com/power-platform/developer/create-developer-environment" target="_blank" rel="noopener noreferrer">Creating Microsoft 365 Developer Environment</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Low-Code/blog/tags/low-code-february">low-code-february</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Low-Code/blog/tags/28-days-of-lowcode">28-days-of-lowcode</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Low-Code/blog/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Low-Code/blog/tags/zero-to-hero">zero-to-hero</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Low-Code/blog/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Low-Code/blog/tags/fusion-teams">fusion-teams</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Low-Code/blog/tags/power-platform">power-platform</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Low-Code/blog/2023-day11"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">11. Azure Integration Patterns</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Low-Code/blog/2023-day9-use"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">9b. Use the Custom Connector</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-well-cover" class="table-of-contents__link toc-highlight">What We&#39;ll Cover</a></li><li><a href="#custom-connector-authentication-types" class="table-of-contents__link toc-highlight">Custom Connector Authentication Types</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#deploying-sample-apps" class="table-of-contents__link toc-highlight">Deploying Sample Apps</a><ul><li><a href="#1-api-key-auth" class="table-of-contents__link toc-highlight">1. API Key Auth</a></li><li><a href="#2-basic-auth" class="table-of-contents__link toc-highlight">2. Basic Auth</a></li><li><a href="#3-oauth2---auth-code" class="table-of-contents__link toc-highlight">3. OAuth2 - Auth Code</a></li><li><a href="#4-bff---combine-auth" class="table-of-contents__link toc-highlight">4. BFF - Combine Auth</a></li></ul></li><li><a href="#exercise--try-it-yourself" class="table-of-contents__link toc-highlight">Exercise – Try it yourself!</a></li><li><a href="#resources--self-study" class="table-of-contents__link toc-highlight">Resources – Self-Study</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://aka.ms/lowcode-february/collection" target="_blank" rel="noopener noreferrer" class="footer__link-item">Collection</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/power-platform/developer/get-started?WT.mc_id=javascript-82212-ninarasi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Power Platform</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/power-virtual-agents/fundamentals-what-is-power-virtual-agents?WT.mc_id=javascript-82212-ninarasi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Power Virtual Agents</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/power-automate/getting-started?WT.mc_id=javascript-82212-ninarasi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Power Automate</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/power-apps/powerapps-overview?WT.mc_id=javascript-82212-ninarasi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Power Apps</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/power-bi/fundamentals/power-bi-service-overview?WT.mc_id=javascript-82212-ninarasi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Power BI</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/power-pages/introduction?WT.mc_id=javascript-82212-ninarasi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Power Pages</a><span class="footer__link-separator">·</span><a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://go.microsoft.com/fwlink/?linkid=2259814" target="_blank" rel="noopener noreferrer" class="footer__link-item">Consumer Health Privacy</a><span class="footer__link-separator">·</span><a href="https://microsoft.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Copyright © 2024 Microsoft</a></div></div></div></footer></div>
<script src="/Low-Code/assets/js/runtime~main.f6b0d7e3.js"></script>
<script src="/Low-Code/assets/js/main.e853704f.js"></script>
</body>
</html>